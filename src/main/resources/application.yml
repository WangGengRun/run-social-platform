spring:
  application:
    name: run-social-platform
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/social_platform?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false
    username: root
    password: 123456
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      initial-size: 5
      min-idle: 5
      max-active: 20
      max-wait: 60000
      time-between-eviction-runs-millis: 60000
      min-evictable-idle-time-millis: 300000
      validation-query: SELECT 1
      test-while-idle: true
      test-on-borrow: false
      test-on-return: false
      pool-prepared-statements: true
      max-pool-prepared-statement-per-connection-size: 20
      filters: stat,wall,slf4j

  data:
    redis:
      host: 192.168.88.139
      lettuce:
        pool:
            max-active: 20
            max-wait: -1ms
            max-idle: 10
            min-idle: 0
      timeout: 5000ms


# MyBatis-Plus配置
mybatis-plus:
  type-aliases-package: com.alumni.module.**.model
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: status  # 逻辑删除字段
      logic-delete-value: 0      # 逻辑删除值
      logic-not-delete-value: 1  # 逻辑未删除值
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
server:
  port: 8120
  servlet:
    context-path: /api

# 日志配置
logging:
  level:
    com.alumni: debug
    org.springframework.security: debug
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: logs/alumni-platform.log

jwt:
  secret: alumni-platform-secret-key-2024-spring-jwt-token
  expiration: 86400  # 24小时，单位秒
  header: Authorization
  token-prefix: "Bearer "



# 在原有配置基础上添加验证码配置
alumni:
  captcha:
    # 验证码配置
    default-length: 6  # 默认验证码长度
    expire-seconds: 300  # 验证码有效期（秒）
    send-interval: 5    # 发送间隔（秒）
    # 短信配置（需要集成实际服务时配置）
    sms:
      enabled: false
      provider: aliyun  # aliyun, tencent
      access-key: your-access-key
      access-secret: your-access-secret
      sign-name: 校友平台
      template-code: SMS_123456789
    # 邮箱配置
    email:
      enabled: false
      host: smtp.example.com
      port: 465
      username: noreply@example.com
      password: your-email-password
      from: 校友平台 <noreply@example.com>



springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    path: /v3/api-docs
  group-configs:
    - group: 'default'
      paths-to-match: '/**'
      packages-to-scan: com.run.runsocialplatform.module

knife4j:
#  # 全局请求头列表
#  global-headers:
#    - name: Authorization # 请求头名称（如 Token、TokenId 等，可自定义）
#      description: 接口访问令牌（Bearer 格式） # 请求头描述
#      required: true # 是否必填（true：必须传，false：可选）
#      example: "Bearer eyJhbGciOiJIUzI1NiJ9.
#      eyJhdXRob3JpdGllcyI6WyJBTFVNTkkiXSwidXNlcm5hbWUiOiJydW4xMTEiLCJpYXQiOjE3Njc1MzU2NDIsImV4cCI6MTc2NzYyMjA0Mn0.
#      BQj-6wKfEZiDsuYX3cryl_FiVvfBfJGrBBMwheZfciY" # 示例值（便于测试）
#    - name: Content-Type # 可选：添加 Content-Type 等其他通用请求头
#      description: 请求体格式
#      required: true
#      example: "application/json"
  enable: true
  setting:
    language: zh_cn